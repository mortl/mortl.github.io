function getWeather(){var n="http://api.wunderground.com/api/c67e9d8da41867a4/geolookup/conditions/q/Canada/Toronto.json";$.ajax({url:n,dataType:"jsonp",success:function(n){console.log(n);n.location.city,n.current_observation.temp_c}})}function updateBackground(n,t){$.getJSON("http://ip-api.com/json/?callback=?",function(a){latitude=a.lat,longitude=a.lon;var e=SunCalc2.getDayInfo(t,latitude,longitude,!0),o=e.morningTwilight,s=e.nightTwilight,r=o.astronomical.start.getHours(),i=o.civil.end.getHours(),u=e.transit.getHours(),c=e.sunrise.start.getHours(),d=e.sunrise.end.getHours(),g=s.astronomical.start.getHours(),l=e.sunset.end.getHours(),f=e.dusk.getHours()+2,h=24;1==n&&(console.log("times dusk "+formatTime(e.dusk,!0)),console.log("sunset start "+formatTime(e.sunset.start,!0)),console.log("sunset "+formatTime(e.sunset.end,!0)),console.log("sunrise "+formatTime(e.sunrise.start,!0)),console.log("sunrise end "+formatTime(e.sunrise.end,!0)),console.log("dawn "+formatTime(e.dawn)),console.log("noon "+formatTime(e.transit,!0)),console.log("dusk "+formatTime(e.dusk,!0)),console.log("sunrise start: "+c),console.log("sunrise end "+d),console.log("night start "+g),console.log("morningStart: "+r),console.log("morning end "+i));var m=$("body"),M=$("#showStars"),p=($("#bgImg"),$("#cloudDiv")),v=t.getHours();u>v&&l>=v&&$("#main-banner").prepend($("<img>",{id:"bgImg",src:"./assets/images/74wingold-day.png"})),v>=u&&l>v&&$("#main-banner").prepend($("<img>",{id:"bgImg",src:"./assets/images/74wingold-day.png"})),v>=0&&r>v&&$("#main-banner").prepend($("<img>",{id:"bgImg",src:"./assets/images/74wingold-night.png"})),v>=l&&f>v&&$("#main-banner").prepend($("<img>",{id:"bgImg",src:"./assets/images/74wingold-day.png"})),v>=f&&h>=v&&$("#main-banner").prepend($("<img>",{id:"bgImg",src:"./assets/images/74wingold-night.png"})),v>=0&&r>v&&(m.toggleClass("dawn"),M.addClass("stars"),p.toggleClass("clouds-night")),v>=r&&u>v&&(m.toggleClass("sunrise"),p.addClass("clouds-day")),v>=u&&l>v&&(m.toggleClass("day "),p.addClass("clouds-day")),v>=l&&f>v&&(m.toggleClass("sunset"),p.addClass("clouds-day")),v>=f&&h>=v&&(m.toggleClass("night"),M.addClass("stars"),p.addClass("clouds-night"),p.removeClass("clouds-day"))})}function displayMoonPhase(n){var t=SunCalc.getMoonIllumination(n),a=t.phase,e=findMoonPhase(a);$(".moonPhase").append(e)}function findMoonPhase(n){var t="";return 0==n?t="New Moon":n>0&&.25>n?t="Waxing Crescent":.25==n?t="First Quarter":n>.25&&.5>n?t="Waxing Gibbous":.5==n?t="Full Moon":n>.5&&.75>n?t="Last Quarter":n>=.75&&1>=n&&(t="Waning Crescent"),t}function formatTime(n,t){if(isNaN(n))return"&nbsp;&nbsp;n/a&nbsp;&nbsp;";var a,e=n.getHours(),o=n.getMinutes();return t?(a=12>e?"am":"pm",0==e&&(e=12),e>12&&(e-=12)):e=10>e?"0"+e:""+e,o=10>o?"0"+o:""+o,e+":"+o+(t?" "+a:"")}$(document).ready(function(){var n=!1,t=new Date;setTimeout(updateBackground(n,t),500),displayMoonPhase(t),getWeather()}),SunCalc2=function(){function n(n){return n.valueOf()/E-.5+p}function t(n){return new Date((n+.5-p)*E)}function a(n,t){return Math.round(n-v-y-t/(2*Math.PI))}function e(n,t,a){return v+y+(n+t)/(2*Math.PI)+a}function o(n){return b+C*(n-v)}function s(n){return P*Math.sin(n)+I*Math.sin(2*n)+H*Math.sin(3*n)}function r(n,t){return n+k+t+Math.PI}function i(n,t,a){return n+T*Math.sin(t)+$*Math.sin(2*a)}function u(n){return Math.asin(Math.sin(n)*Math.sin(D))}function c(n){return Math.atan2(Math.sin(n)*Math.cos(D),Math.cos(n))}function d(n,t){return S+N*(n-v)-t}function g(n,t,a,e){var o=n-t;return Math.atan2(Math.sin(o),Math.cos(o)*Math.sin(a)-Math.tan(e)*Math.cos(a))}function l(n,t,a,e){var o=n-t;return Math.asin(Math.sin(a)*Math.sin(e)+Math.cos(a)*Math.cos(e)*Math.cos(o))}function f(n,t,a){return Math.acos((Math.sin(n)-Math.sin(t)*Math.sin(a))/(Math.cos(t)*Math.cos(a)))}function h(n,t,a,o,s){return i(e(n,o,s),t,a)}function m(n,t){return n-(t-n)}function M(n,t,a){var e=o(n),i=s(e),f=r(e,i),h=u(f),m=c(f),M=d(n,t);return{azimuth:g(M,m,a,h),altitude:l(M,m,a,h)}}var p=2440588,v=2451545,w=Math.PI/180,b=357.5291*w,C=.98560028*w,y=9e-4,T=.0053,$=-.0069,P=1.9148*w,I=.02*w,H=3e-4*w,k=102.9372*w,D=23.45*w,S=280.16*w,N=360.9856235*w,W=-.83*w,j=.53*w,x=-6*w,O=-12*w,z=-18*w,E=864e5;return{getDayInfo:function(c,d,g,l){var M=-g*w,p=d*w,v=n(c),b=a(v,M),C=e(0,M,b),y=o(C),T=s(y),$=r(y,T),P=u($),I=i(C,y,$),H=f(W,p,P),k=f(W+j,p,P),D=h(H,y,$,M,b),S=h(k,y,$,M,b),N=m(I,D),E=m(I,S),q=f(x,p,P),B=h(q,y,$,M,b),F=m(I,B),Q={dawn:t(F),sunrise:{start:t(N),end:t(E)},transit:t(I),sunset:{start:t(S),end:t(D)},dusk:t(B)};if(l){var U=f(O,p,P),_=f(z,p,P),G=h(U,y,$,M,b),J=h(_,y,$,M,b),L=m(I,G),A=m(I,J);Q.morningTwilight={astronomical:{start:t(A),end:t(L)},nautical:{start:t(L),end:t(F)},civil:{start:t(F),end:t(N)}},Q.nightTwilight={civil:{start:t(D),end:t(B)},nautical:{start:t(B),end:t(G)},astronomical:{start:t(G),end:t(J)}}}return Q},getSunPosition:function(t,a,e){return M(n(t),-e*w,a*w)}}}(),function(){"use strict";function n(n){return n.valueOf()/I-.5+H}function t(n){return new Date((n+.5-H)*I)}function a(t){return n(t)-k}function e(n,t){return T(w(n)*b(D)-C(t)*w(D),b(n))}function o(n,t){return y(w(t)*b(D)+b(t)*w(D)*w(n))}function s(n,t,a){return T(w(n),b(n)*w(t)-C(a)*b(t))}function r(n,t,a){return y(w(t)*w(a)+b(t)*b(a)*b(n))}function i(n,t){return P*(280.16+360.9856235*n)-t}function u(n){return P*(357.5291+.98560028*n)}function c(n){var t=P*(1.9148*w(n)+.02*w(2*n)+3e-4*w(3*n)),a=102.9372*P;return n+t+a+v}function d(n){var t=u(n),a=c(t);return{dec:o(a,0),ra:e(a,0)}}function g(n,t){return Math.round(n-W-t/(2*v))}function l(n,t,a){return W+(n+t)/(2*v)+a}function f(n,t,a){return k+n+.0053*w(t)-.0069*w(2*a)}function h(n,t,a){return $((w(n)-w(t)*w(a))/(b(t)*b(a)))}function m(n,t,a,e,o,s,r){var i=h(n,a,e),u=l(i,t,o);return f(u,s,r)}function M(n){var t=P*(218.316+13.176396*n),a=P*(134.963+13.064993*n),s=P*(93.272+13.22935*n),r=t+6.289*P*w(a),i=5.128*P*w(s),u=385001-20905*b(a);return{ra:e(r,i),dec:o(r,i),dist:u}}function p(n,t){return new Date(n.valueOf()+t*I/24)}var v=Math.PI,w=Math.sin,b=Math.cos,C=Math.tan,y=Math.asin,T=Math.atan2,$=Math.acos,P=v/180,I=864e5,H=2440588,k=2451545,D=23.4397*P,S={};S.getPosition=function(n,t,e){var o=P*-e,u=P*t,c=a(n),g=d(c),l=i(c,o)-g.ra;return{azimuth:s(l,u,g.dec),altitude:r(l,u,g.dec)}};var N=S.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];S.addTime=function(n,t,a){N.push([n,t,a])};var W=9e-4;S.getTimes=function(n,e,s){var r,i,d,h,M,p=P*-s,v=P*e,w=a(n),b=g(w,p),C=l(0,p,b),y=u(C),T=c(y),$=o(T,0),I=f(C,y,T),H={solarNoon:t(I),nadir:t(I-.5)};for(r=0,i=N.length;i>r;r+=1)d=N[r],h=m(d[0]*P,p,v,$,b,y,T),M=I-(h-I),H[d[1]]=t(M),H[d[2]]=t(h);return H},S.getMoonPosition=function(n,t,e){var o=P*-e,u=P*t,c=a(n),d=M(c),g=i(c,o)-d.ra,l=r(g,u,d.dec);return l+=.017*P/C(l+10.26*P/(l+5.1*P)),{azimuth:s(g,u,d.dec),altitude:l,distance:d.dist}},S.getMoonIllumination=function(n){var t=a(n),e=d(t),o=M(t),s=149598e3,r=$(w(e.dec)*w(o.dec)+b(e.dec)*b(o.dec)*b(e.ra-o.ra)),i=T(s*w(r),o.dist-s*b(r)),u=T(b(e.dec)*w(e.ra-o.ra),w(e.dec)*b(o.dec)-b(e.dec)*w(o.dec)*b(e.ra-o.ra));return{fraction:(1+b(i))/2,phase:.5+.5*i*(0>u?-1:1)/Math.PI,angle:u}},S.getMoonTimes=function(n,t,a,e){var o=new Date(n);e?o.setUTCHours(0,0,0,0):o.setHours(0,0,0,0);for(var s,r,i,u,c,d,g,l,f,h,m,M,v,w=.133*P,b=S.getMoonPosition(o,t,a).altitude-w,C=1;24>=C&&(s=S.getMoonPosition(p(o,C),t,a).altitude-w,r=S.getMoonPosition(p(o,C+1),t,a).altitude-w,c=(b+r)/2-s,d=(r-b)/2,g=-d/(2*c),l=(c*g+d)*g+s,f=d*d-4*c*s,h=0,f>=0&&(v=Math.sqrt(f)/(2*Math.abs(c)),m=g-v,M=g+v,Math.abs(m)<=1&&h++,Math.abs(M)<=1&&h++,-1>m&&(m=M)),1===h?0>b?i=C+m:u=C+m:2===h&&(i=C+(0>l?M:m),u=C+(0>l?m:M)),!i||!u);C+=2)b=r;var y={};return i&&(y.rise=p(o,i)),u&&(y.set=p(o,u)),i||u||(y[l>0?"alwaysUp":"alwaysDown"]=!0),y},"function"==typeof define&&define.amd?define(S):"undefined"!=typeof module?module.exports=S:window.SunCalc=S}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJzdW5jYWxjLTItMC5qcyIsInN1bmNhbGMuanMiXSwibmFtZXMiOlsiZ2V0V2VhdGhlciIsInVybFRvV1UiLCIkIiwiYWpheCIsInVybCIsImRhdGFUeXBlIiwic3VjY2VzcyIsInBhcnNlZF9qc29uIiwiY29uc29sZSIsImxvZyIsInVwZGF0ZUJhY2tncm91bmQiLCJkZWJ1ZyIsImN1cnJlbnREYXRlIiwiZ2V0SlNPTiIsImRhdGEiLCJsYXRpdHVkZSIsImxhdCIsImxvbmdpdHVkZSIsImxvbiIsInRpbWVzIiwiU3VuQ2FsYzIiLCJnZXREYXlJbmZvIiwibW9ybmluZ0luZm8iLCJtb3JuaW5nVHdpbGlnaHQiLCJuaWdodEluZm8iLCJuaWdodFR3aWxpZ2h0IiwibW9ybmluZ1N0YXJ0IiwiYXN0cm9ub21pY2FsIiwic3RhcnQiLCJnZXRIb3VycyIsIm1vcm5pbmdFbmQiLCJjaXZpbCIsImVuZCIsIm5vb24iLCJ0cmFuc2l0Iiwic3VucmlzZVN0YXJ0Iiwic3VucmlzZSIsInN1bnJpc2VFbmQiLCJuaWdodFN0YXJ0Iiwic3Vuc2V0IiwiZHVzayIsIm1pZG5pZ2h0IiwiZm9ybWF0VGltZSIsImRhd24iLCJib2R5VGFnIiwic2hvd1N0YXJzIiwiY2xvdWREaXYiLCJjdXJyZW50VGltZSIsInByZXBlbmQiLCJpZCIsInNyYyIsInRvZ2dsZUNsYXNzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImRpc3BsYXlNb29uUGhhc2UiLCJtb29uSW5mbyIsIlN1bkNhbGMiLCJnZXRNb29uSWxsdW1pbmF0aW9uIiwibW9vblBoYXNlIiwicGhhc2UiLCJtb29uVGV4dCIsImZpbmRNb29uUGhhc2UiLCJhcHBlbmQiLCJtb29uUGhzIiwibW9vblBoU3RyIiwiZGF0ZSIsInBvc3RmaXgiLCJpc05hTiIsImFwIiwiaG91cnMiLCJtaW51dGVzIiwiZ2V0TWludXRlcyIsImRvY3VtZW50IiwicmVhZHkiLCJEYXRlIiwic2V0VGltZW91dCIsImRhdGVUb0p1bGlhbkRhdGUiLCJ2YWx1ZU9mIiwibXNJbkRheSIsIkoxOTcwIiwianVsaWFuRGF0ZVRvRGF0ZSIsImoiLCJnZXRKdWxpYW5DeWNsZSIsIkoiLCJsdyIsIk1hdGgiLCJyb3VuZCIsIkoyMDAwIiwiSjAiLCJQSSIsImdldEFwcHJveFNvbGFyVHJhbnNpdCIsIkh0IiwibiIsImdldFNvbGFyTWVhbkFub21hbHkiLCJKcyIsIk0wIiwiTTEiLCJnZXRFcXVhdGlvbk9mQ2VudGVyIiwiTSIsIkMxIiwic2luIiwiQzIiLCJDMyIsImdldEVjbGlwdGljTG9uZ2l0dWRlIiwiQyIsIlAiLCJnZXRTb2xhclRyYW5zaXQiLCJMc3VuIiwiSjEiLCJKMiIsImdldFN1bkRlY2xpbmF0aW9uIiwiYXNpbiIsImUiLCJnZXRSaWdodEFzY2Vuc2lvbiIsImF0YW4yIiwiY29zIiwiZ2V0U2lkZXJlYWxUaW1lIiwidGgwIiwidGgxIiwiZ2V0QXppbXV0aCIsInRoIiwiYSIsInBoaSIsImQiLCJIIiwidGFuIiwiZ2V0QWx0aXR1ZGUiLCJnZXRIb3VyQW5nbGUiLCJoIiwiYWNvcyIsImdldFN1bnNldEp1bGlhbkRhdGUiLCJ3MCIsImdldFN1bnJpc2VKdWxpYW5EYXRlIiwiSnRyYW5zaXQiLCJKc2V0IiwiZ2V0U3VuUG9zaXRpb24iLCJhemltdXRoIiwiYWx0aXR1ZGUiLCJkZWcycmFkIiwiaDAiLCJkMCIsImgxIiwiaDIiLCJoMyIsImxuZyIsImRldGFpbGVkIiwidzEiLCJKc2V0c3RhcnQiLCJKcmlzZSIsIkpyaXNlZW5kIiwidzIiLCJKbmF1IiwiSmNpdjIiLCJpbmZvIiwidzMiLCJ3NCIsIkphc3RybyIsIkpkYXJrIiwiSm5hdTIiLCJKYXN0cm8yIiwibmF1dGljYWwiLCJ0b0p1bGlhbiIsImRheU1zIiwiZnJvbUp1bGlhbiIsInRvRGF5cyIsInJpZ2h0QXNjZW5zaW9uIiwibCIsImIiLCJhdGFuIiwiZGVjbGluYXRpb24iLCJkZWMiLCJzaWRlcmVhbFRpbWUiLCJyYWQiLCJzb2xhck1lYW5Bbm9tYWx5IiwiZWNsaXB0aWNMb25naXR1ZGUiLCJzdW5Db29yZHMiLCJMIiwicmEiLCJqdWxpYW5DeWNsZSIsImFwcHJveFRyYW5zaXQiLCJzb2xhclRyYW5zaXRKIiwiZHMiLCJob3VyQW5nbGUiLCJnZXRTZXRKIiwidyIsIm1vb25Db29yZHMiLCJGIiwiZHQiLCJkaXN0IiwiaG91cnNMYXRlciIsImdldFBvc2l0aW9uIiwiYyIsImFkZFRpbWUiLCJhbmdsZSIsInJpc2VOYW1lIiwic2V0TmFtZSIsInB1c2giLCJnZXRUaW1lcyIsImkiLCJsZW4iLCJ0aW1lIiwiSm5vb24iLCJyZXN1bHQiLCJzb2xhck5vb24iLCJuYWRpciIsImxlbmd0aCIsImdldE1vb25Qb3NpdGlvbiIsImRpc3RhbmNlIiwicyIsIm0iLCJzZGlzdCIsImluYyIsImZyYWN0aW9uIiwiZ2V0TW9vblRpbWVzIiwiaW5VVEMiLCJ0Iiwic2V0VVRDSG91cnMiLCJzZXRIb3VycyIsInJpc2UiLCJzZXQiLCJ4ZSIsInllIiwicm9vdHMiLCJ4MSIsIngyIiwiZHgiLCJoYyIsInNxcnQiLCJhYnMiLCJkZWZpbmUiLCJhbWQiLCJtb2R1bGUiLCJleHBvcnRzIiwid2luZG93Il0sIm1hcHBpbmdzIjoiQUFjQSxRQUFBQSxjQUVBLEdBQUFDLEdBQ0EsNkZBSUFDLEdBQUFDLE1BQ0FDLElBQUFILEVBQ0FJLFNBQUEsUUFDQUMsUUFBQSxTQUFBQyxHQUNBQyxRQUFBQyxJQUFBRixFQUNBQSxHQUFBLFNBQUEsS0FDQUEsRUFBQSxvQkFBQSxVQVNBLFFBQUFHLGtCQUFBQyxFQUFBQyxHQUdBVixFQUFBVyxRQUFBLHFDQUFBLFNBQUFDLEdBQ0FDLFNBQUFELEVBQUFFLElBQ0FDLFVBQUFILEVBQUFJLEdBTUEsSUFBQUMsR0FBQUMsU0FBQUMsV0FBQVQsRUFBQUcsU0FBQUUsV0FBQSxHQUdBSyxFQUFBSCxFQUFBSSxnQkFHQUMsRUFBQUwsRUFBQU0sY0FFQUMsRUFBQUosRUFBQUssYUFBQUMsTUFBQUMsV0FDQUMsRUFBQVIsRUFBQVMsTUFBQUMsSUFBQUgsV0FDQUksRUFBQWQsRUFBQWUs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LEVBQUFFLEVBQUFDLEtBR0FOLElBQUFDLEdBN0JBckIsR0FBQSxFQStCQTNELEVBQUFHLENBR0EsSUFBQTRELEtBT0EsT0FMQWdCLEtBQUFoQixFQUFBZ0IsS0FBQTdCLEVBQUEwQixFQUFBRyxJQUNBQyxJQUFBakIsRUFBQWlCLElBQUE5QixFQUFBMEIsRUFBQUksSUFFQUQsR0FBQUMsSUFBQWpCLEVBQUFtQixFQUFBLEVBQUEsV0FBQSxlQUFBLEdBRUFuQixHQUtBLGtCQUFBMkIsU0FBQUEsT0FBQUMsSUFBQUQsT0FBQTdLLEdBQ0EsbUJBQUErSyxRQUFBQSxPQUFBQyxRQUFBaEwsRUFDQWlMLE9BQUFqTCxRQUFBQSIsImZpbGUiOiJidW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcblxuICB2YXIgZGVidWcgPSBmYWxzZTtcbiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuXG4gIHNldFRpbWVvdXQodXBkYXRlQmFja2dyb3VuZChkZWJ1ZywgZGF0ZSksIDUwMCk7XG4gIGRpc3BsYXlNb29uUGhhc2UoZGF0ZSk7XG4gIGdldFdlYXRoZXIoKTtcblxuXG59KTtcblxuLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS8vXG5cbmZ1bmN0aW9uIGdldFdlYXRoZXIoKSB7XG5cbiAgdmFyIHVybFRvV1UgPVxuICAgIFwiaHR0cDovL2FwaS53dW5kZXJncm91bmQuY29tL2FwaS9jNjdlOWQ4ZGE0MTg2N2E0L2dlb2xvb2t1cC9jb25kaXRpb25zL3EvQ2FuYWRhL1Rvcm9udG8uanNvblwiO1xuXG5cblxuICAkLmFqYXgoe1xuICAgIHVybDogdXJsVG9XVSxcbiAgICBkYXRhVHlwZTogXCJqc29ucFwiLFxuICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHBhcnNlZF9qc29uKSB7XG4gICAgICBjb25zb2xlLmxvZyhwYXJzZWRfanNvbik7XG4gICAgICB2YXIgbG9jYXRpb24gPSBwYXJzZWRfanNvblsnbG9jYXRpb24nXVsnY2l0eSddO1xuICAgICAgdmFyIHRlbXBfYyA9IHBhcnNlZF9qc29uWydjdXJyZW50X29ic2VydmF0aW9uJ11bJ3RlbXBfYyddO1xuXG5cblxuICAgIH1cbiAgfSk7XG5cbn1cblxuZnVuY3Rpb24gdXBkYXRlQmFja2dyb3VuZChkZWJ1ZywgY3VycmVudERhdGUpIHtcblxuICAvL1B1bGwgaW4gdGhlIGlwLWFwaSB0byByZXRyaWV2ZSB0aGUgbGF0aXR1ZGUgYW5kIGxvbmdpdHVkZSBvZiB0aGUgY3VycmVudCBsb2NhdGlvbiBvZiB0aGUgdXNlci5cbiAgJC5nZXRKU09OKFwiaHR0cDovL2lwLWFwaS5jb20vanNvbi8/Y2FsbGJhY2s9P1wiLCBmdW5jdGlvbihkYXRhKSB7XG4gICAgbGF0aXR1ZGUgPSBkYXRhLmxhdDtcbiAgICBsb25naXR1ZGUgPSBkYXRhLmxvbjtcblxuICAgIC8qVGhpcyBpcyB0aGUgbW9kaWZpZWQgU3VuY2FsYyB3aGljaCBJIGZvdW5kIG9uIFN1bmNhbGMubmV0XG4gICAgICAgICAgICAgICAgSSB1c2VkIHRoaXMgdmVyc2lvbiB0byBkZXRlcm1pbmUgdGhlIHRpbWVzIG9mIHRoZSBzdW5cbiAgICAgICAgICAgICAgICBiZWNhdXNlIGl0IHdhcyBiZXR0ZXIgb3B0aW1pemVkIHRoZW4gdGhlIG9yaWdpbmFsIHZlcnNpb24uKi9cblxuICAgIHZhciB0aW1lcyA9IFN1bkNhbGMyLmdldERheUluZm8oY3VycmVudERhdGUsIGxhdGl0dWRlLCBsb25naXR1ZGUsIHRydWUpO1xuXG4gICAgLy9HZXQgdGhlIG1vcm5pbmdUd2lsaWdodCBvYmplY3QgdG8gcmV0cmlldmUgZGF0YSBvbiB0aGUgdmFyaW91cyBtb3JuaW5nIGhvdXJzLlxuICAgIHZhciBtb3JuaW5nSW5mbyA9IHRpbWVzLm1vcm5pbmdUd2lsaWdodDtcblxuICAgIC8vR2V0IHRoZSBuaWdodFR3aWxpZ2h0IG9iamVjdCB0byByZXRyZWl2ZSBkYXRhIG9uIHZhcmlvdXMgbmlnaHQgaG91cnMuXG4gICAgdmFyIG5pZ2h0SW5mbyA9IHRpbWVzLm5pZ2h0VHdpbGlnaHQ7XG5cbiAgICB2YXIgbW9ybmluZ1N0YXJ0ID0gbW9ybmluZ0luZm8uYXN0cm9ub21pY2FsLnN0YXJ0LmdldEhvdXJzKCk7XG4gICAgdmFyIG1vcm5pbmdFbmQgPSBtb3JuaW5nSW5mby5jaXZpbC5lbmQuZ2V0SG91cnMoKTtcbiAgICB2YXIgbm9vbiA9IHRpbWVzLnRyYW5zaXQuZ2V0SG91cnMoKTtcbiAgICB2YXIgc3VucmlzZVN0YXJ0ID0gdGltZXMuc3VucmlzZS5zdGFydC5nZXRIb3VycygpO1xuICAgIHZhciBzdW5yaXNlRW5kID0gdGltZXMuc3VucmlzZS5lbmQuZ2V0SG91cnMoKTtcbiAgICB2YXIgbmlnaHRTdGFydCA9IG5pZ2h0SW5mby5hc3Ryb25vbWljYWwuc3RhcnQuZ2V0SG91cnMoKTtcblxuICAgIHZhciBzdW5zZXQgPSB0aW1lcy5zdW5zZXQuZW5kLmdldEhvdXJzKCk7XG4gICAgdmFyIGR1c2sgPSB0aW1lcy5kdXNrLmdldEhvdXJzKCkgKyAyO1xuICAgIHZhciBtaWRuaWdodCA9IDI0O1xuXG5cbiAgICAvL2Rpc3BsYXkgZGVidWdnaW5nIGluZm9ybWF0aW9uLlxuICAgIGlmIChkZWJ1ZyA9PSB0cnVlKSB7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwidGltZXMgZHVzayBcIiArIGZvcm1hdFRpbWUodGltZXMuZHVzaywgdHJ1ZSkpO1xuICAgICAgY29uc29sZS5sb2coXCJzdW5zZXQgc3RhcnQgXCIgKyBmb3JtYXRUaW1lKHRpbWVzLnN1bnNldC5zdGFydCwgdHJ1ZSkpXG4gICAgICBjb25zb2xlLmxvZyhcInN1bnNldCBcIiArIGZvcm1hdFRpbWUodGltZXMuc3Vuc2V0LmVuZCwgdHJ1ZSkpO1xuICAgICAgY29uc29sZS5sb2coXCJzdW5yaXNlIFwiICsgZm9ybWF0VGltZSh0aW1lcy5zdW5yaXNlLnN0YXJ0LCB0cnVlKSk7XG4gICAgICBjb25zb2xlLmxvZyhcInN1bnJpc2UgZW5kIFwiICsgZm9ybWF0VGltZSh0aW1lcy5zdW5yaXNlLmVuZCwgdHJ1ZSkpO1xuICAgICAgY29uc29sZS5sb2coXCJkYXduIFwiICsgZm9ybWF0VGltZSh0aW1lcy5kYXduKSk7XG4gICAgICBjb25zb2xlLmxvZyhcIm5vb24gXCIgKyBmb3JtYXRUaW1lKHRpbWVzLnRyYW5zaXQsIHRydWUpKTtcbiAgICAgIGNvbnNvbGUubG9nKFwiZHVzayBcIiArIGZvcm1hdFRpbWUodGltZXMuZHVzaywgdHJ1ZSkpO1xuXG5cbiAgICAgIGNvbnNvbGUubG9nKFwic3VucmlzZSBzdGFydDogXCIgKyBzdW5yaXNlU3RhcnQpO1xuICAgICAgY29uc29sZS5sb2coXCJzdW5yaXNlIGVuZCBcIiArIHN1bnJpc2VFbmQpO1xuICAgICAgY29uc29sZS5sb2coXCJuaWdodCBzdGFydCBcIiArIG5pZ2h0U3RhcnQpO1xuICAgICAgY29uc29sZS5sb2coXCJtb3JuaW5nU3RhcnQ6IFwiICsgbW9ybmluZ1N0YXJ0KTtcbiAgICAgIGNvbnNvbGUubG9nKFwibW9ybmluZyBlbmQgXCIgKyBtb3JuaW5nRW5kKTtcblxuICAgIH1cblxuXG5cbiAgICB2YXIgYm9keVRhZyA9ICQoXCJib2R5XCIpO1xuICAgIHZhciBzaG93U3RhcnMgPSAkKFwiI3Nob3dTdGFyc1wiKTtcbiAgICB2YXIgaW1nVGFnID0gJChcIiNiZ0ltZ1wiKTtcbiAgICB2YXIgY2xvdWREaXYgPSAkKFwiI2Nsb3VkRGl2XCIpO1xuXG4gICAgdmFyIGN1cnJlbnRUaW1lID0gY3VycmVudERhdGUuZ2V0SG91cnMoKTtcblxuICAgIGlmIChub29uID4gY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPD0gc3Vuc2V0KSB7XG5cblxuICAgICAgJCgnI21haW4tYmFubmVyJykucHJlcGVuZCgkKCc8aW1nPicsIHtcbiAgICAgICAgaWQ6ICdiZ0ltZycsXG4gICAgICAgIHNyYzogJy4vYXNzZXRzL2ltYWdlcy83NHdpbmdvbGQtZGF5LnBuZydcbiAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBpZiAobm9vbiA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IHN1bnNldCkge1xuXG4gICAgICAkKCcjbWFpbi1iYW5uZXInKS5wcmVwZW5kKCQoJzxpbWc+Jywge1xuICAgICAgICBpZDogJ2JnSW1nJyxcbiAgICAgICAgc3JjOiAnLi9hc3NldHMvaW1hZ2VzLzc0d2luZ29sZC1kYXkucG5nJ1xuICAgICAgfSkpO1xuXG4gICAgfVxuICAgIGlmICgwIDw9IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lIDwgbW9ybmluZ1N0YXJ0KSB7XG4gICAgICAkKCcjbWFpbi1iYW5uZXInKS5wcmVwZW5kKCQoJzxpbWc+Jywge1xuICAgICAgICBpZDogJ2JnSW1nJyxcbiAgICAgICAgc3JjOiAnLi9hc3NldHMvaW1hZ2VzLzc0d2luZ29sZC1uaWdodC5wbmcnXG4gICAgICB9KSk7XG4gICAgfVxuXG4gICAgaWYgKHN1bnNldCA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8IGR1c2spIHtcblxuICAgICAgJCgnI21haW4tYmFubmVyJykucHJlcGVuZCgkKCc8aW1nPicsIHtcbiAgICAgICAgaWQ6ICdiZ0ltZycsXG4gICAgICAgIHNyYzogJy4vYXNzZXRzL2ltYWdlcy83NHdpbmdvbGQtZGF5LnBuZydcbiAgICAgIH0pKTtcblxuICAgIH1cbiAgICBpZiAoZHVzayA8PSBjdXJyZW50VGltZSAmJiBjdXJyZW50VGltZSA8PSBtaWRuaWdodCkge1xuICAgICAgJCgnI21haW4tYmFubmVyJykucHJlcGVuZCgkKCc8aW1nPicsIHtcbiAgICAgICAgaWQ6ICdiZ0ltZycsXG4gICAgICAgIHNyYzogJy4vYXNzZXRzL2ltYWdlcy83NHdpbmdvbGQtbmlnaHQucG5nJ1xuICAgICAgfSkpO1xuICAgIH1cblxuXG4gICAgLy9DaGVjayB3aGF0IHRoZSBjdXJyZW50IHRpbWUgaXMgYW5kIGNoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yLlxuXG4gICAgaWYgKDAgPD0gY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCBtb3JuaW5nU3RhcnQpIHtcbiAgICAgIGJvZHlUYWcudG9nZ2xlQ2xhc3MoXCJkYXduXCIpO1xuICAgICAgc2hvd1N0YXJzLmFkZENsYXNzKFwic3RhcnNcIik7XG4gICAgICBjbG91ZERpdi50b2dnbGVDbGFzcyhcImNsb3Vkcy1uaWdodFwiKTtcblxuXG4gICAgfVxuICAgIGlmIChtb3JuaW5nU3RhcnQgPD0gY3VycmVudFRpbWUgJiYgY3VycmVudFRpbWUgPCBub29uKSB7XG5cbiAgICAgIGJvZHlUYWcudG9nZ2xlQ2xhc3MoXCJzdW5yaXNlXCIpXG4gICAgICBjbG91ZERpdi5hZGRDbGFzcyhcImNsb3Vkcy1kYXlcIik7XG4gICAgfVxuICAgIGlmIChub29uIDw9IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lIDwgc3Vuc2V0KSB7XG4gICAgICBib2R5VGFnLnRvZ2dsZUNsYXNzKFwiZGF5IFwiKTtcbiAgICAgIGNsb3VkRGl2LmFkZENsYXNzKFwiY2xvdWRzLWRheVwiKTtcblxuICAgIH1cbiAgICBpZiAoc3Vuc2V0IDw9IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lIDwgZHVzaykge1xuXG4gICAgICBib2R5VGFnLnRvZ2dsZUNsYXNzKFwic3Vuc2V0XCIpO1xuICAgICAgY2xvdWREaXYuYWRkQ2xhc3MoXCJjbG91ZHMtZGF5XCIpO1xuXG4gICAgfVxuICAgIGlmIChkdXNrIDw9IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lIDw9IG1pZG5pZ2h0KSB7XG5cbiAgICAgIGJvZHlUYWcudG9nZ2xlQ2xhc3MoXCJuaWdodFwiKTtcbiAgICAgIHNob3dTdGFycy5hZGRDbGFzcyhcInN0YXJzXCIpO1xuICAgICAgY2xvdWREaXYuYWRkQ2xhc3MoXCJjbG91ZHMtbmlnaHRcIik7XG4gICAgICBjbG91ZERpdi5yZW1vdmVDbGFzcyhcImNsb3Vkcy1kYXlcIik7XG5cbiAgICB9XG5cbiAgfSk7XG5cbn1cblxuXG5cbmZ1bmN0aW9uIGRpc3BsYXlNb29uUGhhc2UoY3VycmVudERhdGUpIHtcblxuICB2YXIgbW9vbkluZm8gPSBTdW5DYWxjLmdldE1vb25JbGx1bWluYXRpb24oY3VycmVudERhdGUpO1xuICB2YXIgbW9vblBoYXNlID0gbW9vbkluZm8ucGhhc2U7XG4gIHZhciBtb29uVGV4dCA9IGZpbmRNb29uUGhhc2UobW9vblBoYXNlKTtcblxuICAkKCcubW9vblBoYXNlJykuYXBwZW5kKG1vb25UZXh0KTtcbn1cblxuZnVuY3Rpb24gZmluZE1vb25QaGFzZShtb29uUGhzKSB7XG4gIHZhciBtb29uUGhTdHIgPSBcIlwiO1xuICBpZiAobW9vblBocyA9PSAwKSB7XG4gICAgbW9vblBoU3RyID0gXCJOZXcgTW9vblwiO1xuXG4gIH0gZWxzZSBpZiAobW9vblBocyA+IDAgJiYgbW9vblBocyA8IDAuMjUpIHtcbiAgICBtb29uUGhTdHIgPSBcIldheGluZyBDcmVzY2VudFwiO1xuICB9IGVsc2UgaWYgKG1vb25QaHMgPT0gMC4yNSkge1xuICAgIG1vb25QaFN0ciA9IFwiRmlyc3QgUXVhcnRlclwiO1xuICB9IGVsc2UgaWYgKG1vb25QaHMgPiAwLjI1ICYmIG1vb25QaHMgPCAwLjUwKSB7XG4gICAgbW9vblBoU3RyID0gXCJXYXhpbmcgR2liYm91c1wiO1xuICB9IGVsc2UgaWYgKG1vb25QaHMgPT0gMC41MCkge1xuICAgIG1vb25QaFN0ciA9IFwiRnVsbCBNb29uXCI7XG4gIH0gZWxzZSBpZiAobW9vblBocyA+IDAuNTAgJiYgbW9vblBocyA8IDAuNzUpIHtcbiAgICBtb29uUGhTdHIgPSBcIkxhc3QgUXVhcnRlclwiO1xuICB9IGVsc2UgaWYgKG1vb25QaHMgPj0gMC43NSAmJiBtb29uUGhzIDw9IDEuMDApIHtcbiAgICBtb29uUGhTdHIgPSBcIldhbmluZyBDcmVzY2VudFwiO1xuICB9XG5cbiAgcmV0dXJuIG1vb25QaFN0cjtcbn1cblxuXG5mdW5jdGlvbiBmb3JtYXRUaW1lKGRhdGUsIHBvc3RmaXgpIHtcbiAgaWYgKGlzTmFOKGRhdGUpKSB7XG4gICAgcmV0dXJuICcmbmJzcDsmbmJzcDtuL2EmbmJzcDsmbmJzcDsnO1xuICB9XG5cbiAgdmFyIGhvdXJzID0gZGF0ZS5nZXRIb3VycygpLFxuICAgIG1pbnV0ZXMgPSBkYXRlLmdldE1pbnV0ZXMoKSxcbiAgICBhcDtcblxuICBpZiAocG9zdGZpeCkge1xuICAgIGFwID0gKGhvdXJzIDwgMTIgPyAnYW0nIDogJ3BtJyk7XG4gICAgaWYgKGhvdXJzID09IDApIHtcbiAgICAgIGhvdXJzID0gMTI7XG4gICAgfVxuICAgIGlmIChob3VycyA+IDEyKSB7XG4gICAgICBob3VycyAtPSAxMjtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaG91cnMgPSAoaG91cnMgPCAxMCA/ICcwJyArIGhvdXJzIDogJycgKyBob3Vycyk7XG4gIH1cblxuICBtaW51dGVzID0gKG1pbnV0ZXMgPCAxMCA/ICcwJyArIG1pbnV0ZXMgOiAnJyArIG1pbnV0ZXMpO1xuXG4gIHJldHVybiBob3VycyArICc6JyArIG1pbnV0ZXMgKyAocG9zdGZpeCA/ICcgJyArIGFwIDogJycpO1xufVxuIiwiU3VuQ2FsYzIgPSAoZnVuY3Rpb24oKSB7XG5cdHZhciBKMTk3MCA9IDI0NDA1ODgsXG5cdFx0SjIwMDAgPSAyNDUxNTQ1LFxuXHRcdGRlZzJyYWQgPSBNYXRoLlBJIC8gMTgwLFxuXHRcdE0wID0gMzU3LjUyOTEgKiBkZWcycmFkLFxuXHRcdE0xID0gMC45ODU2MDAyOCAqIGRlZzJyYWQsXG5cdFx0SjAgPSAwLjAwMDksXG5cdFx0SjEgPSAwLjAwNTMsXG5cdFx0SjIgPSAtMC4wMDY5LFxuXHRcdEMxID0gMS45MTQ4ICogZGVnMnJhZCxcblx0XHRDMiA9IDAuMDIwMCAqIGRlZzJyYWQsXG5cdFx0QzMgPSAwLjAwMDMgKiBkZWcycmFkLFxuXHRcdFAgPSAxMDIuOTM3MiAqIGRlZzJyYWQsXG5cdFx0ZSA9IDIzLjQ1ICogZGVnMnJhZCxcblx0XHR0aDAgPSAyODAuMTYwMCAqIGRlZzJyYWQsXG5cdFx0dGgxID0gMzYwLjk4NTYyMzUgKiBkZWcycmFkLFxuXHRcdGgwID0gLTAuODMgKiBkZWcycmFkLCAvL3N1bnNldCBhbmdsZVxuXHRcdGQwID0gMC41MyAqIGRlZzJyYWQsIC8vc3VuIGRpYW1ldGVyXG5cdFx0aDEgPSAtNiAqIGRlZzJyYWQsIC8vbmF1dGljYWwgdHdpbGlnaHQgYW5nbGVcblx0XHRoMiA9IC0xMiAqIGRlZzJyYWQsIC8vYXN0cm9ub21pY2FsIHR3aWxpZ2h0IGFuZ2xlXG5cdFx0aDMgPSAtMTggKiBkZWcycmFkLCAvL2RhcmtuZXNzIGFuZ2xlXG5cdFx0bXNJbkRheSA9IDEwMDAgKiA2MCAqIDYwICogMjQ7XG5cblx0ZnVuY3Rpb24gZGF0ZVRvSnVsaWFuRGF0ZShkYXRlKSB7XG5cdFx0cmV0dXJuIGRhdGUudmFsdWVPZigpIC8gbXNJbkRheSAtIDAuNSArIEoxOTcwO1xuXHR9XG5cblx0ZnVuY3Rpb24ganVsaWFuRGF0ZVRvRGF0ZShqKSB7XG5cdFx0cmV0dXJuIG5ldyBEYXRlKChqICsgMC41IC0gSjE5NzApICogbXNJbkRheSk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRKdWxpYW5DeWNsZShKLCBsdykge1xuXHRcdHJldHVybiBNYXRoLnJvdW5kKEogLSBKMjAwMCAtIEowIC0gbHcgLyAoMiAqIE1hdGguUEkpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEFwcHJveFNvbGFyVHJhbnNpdChIdCwgbHcsIG4pIHtcblx0XHRyZXR1cm4gSjIwMDAgKyBKMCArIChIdCArIGx3KSAvICgyICogTWF0aC5QSSkgKyBuO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0U29sYXJNZWFuQW5vbWFseShKcykge1xuXHRcdHJldHVybiBNMCArIE0xICogKEpzIC0gSjIwMDApO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RXF1YXRpb25PZkNlbnRlcihNKSB7XG5cdFx0cmV0dXJuIEMxICogTWF0aC5zaW4oTSkgKyBDMiAqIE1hdGguc2luKDIgKiBNKSArIEMzICogTWF0aC5zaW4oMyAqIE0pO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0RWNsaXB0aWNMb25naXR1ZGUoTSwgQykge1xuXHRcdHJldHVybiBNICsgUCArIEMgKyBNYXRoLlBJO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0U29sYXJUcmFuc2l0KEpzLCBNLCBMc3VuKSB7XG5cdFx0cmV0dXJuIEpzICsgKEoxICogTWF0aC5zaW4oTSkpICsgKEoyICogTWF0aC5zaW4oMiAqIExzdW4pKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFN1bkRlY2xpbmF0aW9uKExzdW4pIHtcblx0XHRyZXR1cm4gTWF0aC5hc2luKE1hdGguc2luKExzdW4pICogTWF0aC5zaW4oZSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0UmlnaHRBc2NlbnNpb24oTHN1bikge1xuXHRcdHJldHVybiBNYXRoLmF0YW4yKE1hdGguc2luKExzdW4pICogTWF0aC5jb3MoZSksIE1hdGguY29zKExzdW4pKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFNpZGVyZWFsVGltZShKLCBsdykge1xuXHRcdHJldHVybiB0aDAgKyB0aDEgKiAoSiAtIEoyMDAwKSAtIGx3O1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QXppbXV0aCh0aCwgYSwgcGhpLCBkKSB7XG5cdFx0dmFyIEggPSB0aCAtIGE7XG5cdFx0cmV0dXJuIE1hdGguYXRhbjIoTWF0aC5zaW4oSCksIE1hdGguY29zKEgpICogTWF0aC5zaW4ocGhpKSAtXG5cdFx0XHRNYXRoLnRhbihkKSAqIE1hdGguY29zKHBoaSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0QWx0aXR1ZGUodGgsIGEsIHBoaSwgZCkge1xuXHRcdHZhciBIID0gdGggLSBhO1xuXHRcdHJldHVybiBNYXRoLmFzaW4oTWF0aC5zaW4ocGhpKSAqIE1hdGguc2luKGQpICtcblx0XHRcdE1hdGguY29zKHBoaSkgKiBNYXRoLmNvcyhkKSAqIE1hdGguY29zKEgpKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldEhvdXJBbmdsZShoLCBwaGksIGQpIHtcblx0XHRyZXR1cm4gTWF0aC5hY29zKChNYXRoLnNpbihoKSAtIE1hdGguc2luKHBoaSkgKiBNYXRoLnNpbihkKSkgL1xuXHRcdFx0KE1hdGguY29zKHBoaSkgKiBNYXRoLmNvcyhkKSkpO1xuXHR9XG5cblx0ZnVuY3Rpb24gZ2V0U3Vuc2V0SnVsaWFuRGF0ZSh3MCwgTSwgTHN1biwgbHcsIG4pIHtcblx0XHRyZXR1cm4gZ2V0U29sYXJUcmFuc2l0KGdldEFwcHJveFNvbGFyVHJhbnNpdCh3MCwgbHcsIG4pLCBNLCBMc3VuKTtcblx0fVxuXG5cdGZ1bmN0aW9uIGdldFN1bnJpc2VKdWxpYW5EYXRlKEp0cmFuc2l0LCBKc2V0KSB7XG5cdFx0cmV0dXJuIEp0cmFuc2l0IC0gKEpzZXQgLSBKdHJhbnNpdCk7XG5cdH1cblxuXHRmdW5jdGlvbiBnZXRTdW5Qb3NpdGlvbihKLCBsdywgcGhpKSB7XG5cdFx0dmFyIE0gPSBnZXRTb2xhck1lYW5Bbm9tYWx5KEopLFxuXHRcdFx0QyA9IGdldEVxdWF0aW9uT2ZDZW50ZXIoTSksXG5cdFx0XHRMc3VuID0gZ2V0RWNsaXB0aWNMb25naXR1ZGUoTSwgQyksXG5cdFx0XHRkID0gZ2V0U3VuRGVjbGluYXRpb24oTHN1biksXG5cdFx0XHRhID0gZ2V0UmlnaHRBc2NlbnNpb24oTHN1biksXG5cdFx0XHR0aCA9IGdldFNpZGVyZWFsVGltZShKLCBsdyk7XG5cblx0XHRyZXR1cm4ge1xuXHRcdFx0YXppbXV0aDogZ2V0QXppbXV0aCh0aCwgYSwgcGhpLCBkKSxcblx0XHRcdGFsdGl0dWRlOiBnZXRBbHRpdHVkZSh0aCwgYSwgcGhpLCBkKVxuXHRcdH07XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGdldERheUluZm86IGZ1bmN0aW9uKGRhdGUsIGxhdCwgbG5nLCBkZXRhaWxlZCkge1xuXHRcdFx0dmFyIGx3ID0gLWxuZyAqIGRlZzJyYWQsXG5cdFx0XHRcdHBoaSA9IGxhdCAqIGRlZzJyYWQsXG5cdFx0XHRcdEogPSBkYXRlVG9KdWxpYW5EYXRlKGRhdGUpO1xuXG5cdFx0XHR2YXIgbiA9IGdldEp1bGlhbkN5Y2xlKEosIGx3KSxcblx0XHRcdFx0SnMgPSBnZXRBcHByb3hTb2xhclRyYW5zaXQoMCwgbHcsIG4pLFxuXHRcdFx0XHRNID0gZ2V0U29sYXJNZWFuQW5vbWFseShKcyksXG5cdFx0XHRcdEMgPSBnZXRFcXVhdGlvbk9mQ2VudGVyKE0pLFxuXHRcdFx0XHRMc3VuID0gZ2V0RWNsaXB0aWNMb25naXR1ZGUoTSwgQyksXG5cdFx0XHRcdGQgPSBnZXRTdW5EZWNsaW5hdGlvbihMc3VuKSxcblx0XHRcdFx0SnRyYW5zaXQgPSBnZXRTb2xhclRyYW5zaXQoSnMsIE0sIExzdW4pLFxuXHRcdFx0XHR3MCA9IGdldEhvdXJBbmdsZShoMCwgcGhpLCBkKSxcblx0XHRcdFx0dzEgPSBnZXRIb3VyQW5nbGUoaDAgKyBkMCwgcGhpLCBkKSxcblx0XHRcdFx0SnNldCA9IGdldFN1bnNldEp1bGlhbkRhdGUodzAsIE0sIExzdW4sIGx3LCBuKSxcblx0XHRcdFx0SnNldHN0YXJ0ID0gZ2V0U3Vuc2V0SnVsaWFuRGF0ZSh3MSwgTSwgTHN1biwgbHcsIG4pLFxuXHRcdFx0XHRKcmlzZSA9IGdldFN1bnJpc2VKdWxpYW5EYXRlKEp0cmFuc2l0LCBKc2V0KSxcblx0XHRcdFx0SnJpc2VlbmQgPSBnZXRTdW5yaXNlSnVsaWFuRGF0ZShKdHJhbnNpdCwgSnNldHN0YXJ0KSxcblx0XHRcdFx0dzIgPSBnZXRIb3VyQW5nbGUoaDEsIHBoaSwgZCksXG5cdFx0XHRcdEpuYXUgPSBnZXRTdW5zZXRKdWxpYW5EYXRlKHcyLCBNLCBMc3VuLCBsdywgbiksXG5cdFx0XHRcdEpjaXYyID0gZ2V0U3VucmlzZUp1bGlhbkRhdGUoSnRyYW5zaXQsIEpuYXUpO1xuXG5cdFx0XHR2YXIgaW5mbyA9IHtcblx0XHRcdFx0ZGF3bjoganVsaWFuRGF0ZVRvRGF0ZShKY2l2MiksXG5cdFx0XHRcdHN1bnJpc2U6IHtcblx0XHRcdFx0XHRzdGFydDoganVsaWFuRGF0ZVRvRGF0ZShKcmlzZSksXG5cdFx0XHRcdFx0ZW5kOiBqdWxpYW5EYXRlVG9EYXRlKEpyaXNlZW5kKVxuXHRcdFx0XHR9LFxuXHRcdFx0XHR0cmFuc2l0OiBqdWxpYW5EYXRlVG9EYXRlKEp0cmFuc2l0KSxcblx0XHRcdFx0c3Vuc2V0OiB7XG5cdFx0XHRcdFx0c3RhcnQ6IGp1bGlhbkRhdGVUb0RhdGUoSnNldHN0YXJ0KSxcblx0XHRcdFx0XHRlbmQ6IGp1bGlhbkRhdGVUb0RhdGUoSnNldClcblx0XHRcdFx0fSxcblx0XHRcdFx0ZHVzazoganVsaWFuRGF0ZVRvRGF0ZShKbmF1KVxuXHRcdFx0fTtcblxuXHRcdFx0aWYgKGRldGFpbGVkKSB7XG5cdFx0XHRcdHZhciB3MyA9IGdldEhvdXJBbmdsZShoMiwgcGhpLCBkKSxcblx0XHRcdFx0XHR3NCA9IGdldEhvdXJBbmdsZShoMywgcGhpLCBkKSxcblx0XHRcdFx0XHRKYXN0cm8gPSBnZXRTdW5zZXRKdWxpYW5EYXRlKHczLCBNLCBMc3VuLCBsdywgbiksXG5cdFx0XHRcdFx0SmRhcmsgPSBnZXRTdW5zZXRKdWxpYW5EYXRlKHc0LCBNLCBMc3VuLCBsdywgbiksXG5cdFx0XHRcdFx0Sm5hdTIgPSBnZXRTdW5yaXNlSnVsaWFuRGF0ZShKdHJhbnNpdCwgSmFzdHJvKSxcblx0XHRcdFx0XHRKYXN0cm8yID0gZ2V0U3VucmlzZUp1bGlhbkRhdGUoSnRyYW5zaXQsIEpkYXJrKTtcblxuXHRcdFx0XHRpbmZvLm1vcm5pbmdUd2lsaWdodCA9IHtcblx0XHRcdFx0XHRhc3Ryb25vbWljYWw6IHtcblx0XHRcdFx0XHRcdHN0YXJ0OiBqdWxpYW5EYXRlVG9EYXRlKEphc3RybzIpLFxuXHRcdFx0XHRcdFx0ZW5kOiBqdWxpYW5EYXRlVG9EYXRlKEpuYXUyKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0bmF1dGljYWw6IHtcblx0XHRcdFx0XHRcdHN0YXJ0OiBqdWxpYW5EYXRlVG9EYXRlKEpuYXUyKSxcblx0XHRcdFx0XHRcdGVuZDoganVsaWFuRGF0ZVRvRGF0ZShKY2l2Milcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdGNpdmlsOiB7XG5cdFx0XHRcdFx0XHRzdGFydDoganVsaWFuRGF0ZVRvRGF0ZShKY2l2MiksXG5cdFx0XHRcdFx0XHRlbmQ6IGp1bGlhbkRhdGVUb0RhdGUoSnJpc2UpXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpbmZvLm5pZ2h0VHdpbGlnaHQgPSB7XG5cdFx0XHRcdFx0Y2l2aWw6IHtcblx0XHRcdFx0XHRcdHN0YXJ0OiBqdWxpYW5EYXRlVG9EYXRlKEpzZXQpLFxuXHRcdFx0XHRcdFx0ZW5kOiBqdWxpYW5EYXRlVG9EYXRlKEpuYXUpXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHRuYXV0aWNhbDoge1xuXHRcdFx0XHRcdFx0c3RhcnQ6IGp1bGlhbkRhdGVUb0RhdGUoSm5hdSksXG5cdFx0XHRcdFx0XHRlbmQ6IGp1bGlhbkRhdGVUb0RhdGUoSmFzdHJvKVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0YXN0cm9ub21pY2FsOiB7XG5cdFx0XHRcdFx0XHRzdGFydDoganVsaWFuRGF0ZVRvRGF0ZShKYXN0cm8pLFxuXHRcdFx0XHRcdFx0ZW5kOiBqdWxpYW5EYXRlVG9EYXRlKEpkYXJrKVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGluZm87XG5cdFx0fSxcblxuXHRcdGdldFN1blBvc2l0aW9uOiBmdW5jdGlvbihkYXRlLCBsYXQsIGxuZykge1xuXHRcdFx0cmV0dXJuIGdldFN1blBvc2l0aW9uKGRhdGVUb0p1bGlhbkRhdGUoZGF0ZSksIC1sbmcgKiBkZWcycmFkLCBsYXQgKlxuXHRcdFx0XHRkZWcycmFkKTtcblx0XHR9XG5cdH07XG5cblxuXG59KSgpO1xuXG4vKlxudmFyIGRpID0gU3VuQ2FsYy5nZXREYXlJbmZvKGRhdGEsIGxhdCwgbG5nKTtcbnZhciBzdW5yaXNlUG9zID0gU3VuQ2FsYy5nZXRTdW5Qb3NpdGlvbihkaS5zdW5yaXNlLnN0YXJ0LCBsYXQsIGxuZyk7XG52YXIgc3Vuc2V0UG9zID0gU3VuQ2FsYy5nZXRTdW5Qb3NpdGlvbihkaS5zdW5zZXQuZW5kLCBsYXQsIGxuZyk7XG4qL1xuIiwiLyogKGMpIDIwMTEtMjAxNSwgVmxhZGltaXIgQWdhZm9ua2luXG4gU3VuQ2FsYyBpcyBhIEphdmFTY3JpcHQgbGlicmFyeSBmb3IgY2FsY3VsYXRpbmcgc3VuL21vb24gcG9zaXRpb24gYW5kIGxpZ2h0IHBoYXNlcy5cbiBodHRwczovL2dpdGh1Yi5jb20vbW91cm5lci9zdW5jYWxjXG4qL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8gc2hvcnRjdXRzIGZvciBlYXNpZXIgdG8gcmVhZCBmb3JtdWxhc1xuICAgIHZhciBQSSA9IE1hdGguUEksXG4gICAgICAgIHNpbiA9IE1hdGguc2luLFxuICAgICAgICBjb3MgPSBNYXRoLmNvcyxcbiAgICAgICAgdGFuID0gTWF0aC50YW4sXG4gICAgICAgIGFzaW4gPSBNYXRoLmFzaW4sXG4gICAgICAgIGF0YW4gPSBNYXRoLmF0YW4yLFxuICAgICAgICBhY29zID0gTWF0aC5hY29zLFxuICAgICAgICByYWQgPSBQSSAvIDE4MDtcblxuICAgIC8vIHN1biBjYWxjdWxhdGlvbnMgYXJlIGJhc2VkIG9uIGh0dHA6Ly9hYS5xdWFlLm5sL2VuL3Jla2VuL3pvbnBvc2l0aWUuaHRtbCBmb3JtdWxhc1xuXG5cbiAgICAvLyBkYXRlL3RpbWUgY29uc3RhbnRzIGFuZCBjb252ZXJzaW9uc1xuICAgIHZhciBkYXlNcyA9IDEwMDAgKiA2MCAqIDYwICogMjQsXG4gICAgICAgIEoxOTcwID0gMjQ0MDU4OCxcbiAgICAgICAgSjIwMDAgPSAyNDUxNTQ1O1xuXG4gICAgZnVuY3Rpb24gdG9KdWxpYW4oZGF0ZSkge1xuICAgICAgICByZXR1cm4gZGF0ZS52YWx1ZU9mKCkgLyBkYXlNcyAtIDAuNSArIEoxOTcwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGZyb21KdWxpYW4oaikge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKGogKyAwLjUgLSBKMTk3MCkgKiBkYXlNcyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9EYXlzKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIHRvSnVsaWFuKGRhdGUpIC0gSjIwMDA7XG4gICAgfVxuXG5cbiAgICAvLyBnZW5lcmFsIGNhbGN1bGF0aW9ucyBmb3IgcG9zaXRpb25cbiAgICB2YXIgZSA9IHJhZCAqIDIzLjQzOTc7IC8vIG9ibGlxdWl0eSBvZiB0aGUgRWFydGhcblxuICAgIGZ1bmN0aW9uIHJpZ2h0QXNjZW5zaW9uKGwsIGIpIHtcbiAgICAgICAgcmV0dXJuIGF0YW4oc2luKGwpICogY29zKGUpIC0gdGFuKGIpICogc2luKGUpLCBjb3MobCkpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGRlY2xpbmF0aW9uKGwsIGIpIHtcbiAgICAgICAgcmV0dXJuIGFzaW4oc2luKGIpICogY29zKGUpICsgY29zKGIpICogc2luKGUpICogc2luKGwpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhemltdXRoKEgsIHBoaSwgZGVjKSB7XG4gICAgICAgIHJldHVybiBhdGFuKHNpbihIKSwgY29zKEgpICogc2luKHBoaSkgLSB0YW4oZGVjKSAqIGNvcyhwaGkpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhbHRpdHVkZShILCBwaGksIGRlYykge1xuICAgICAgICByZXR1cm4gYXNpbihzaW4ocGhpKSAqIHNpbihkZWMpICsgY29zKHBoaSkgKiBjb3MoZGVjKSAqIGNvcyhIKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2lkZXJlYWxUaW1lKGQsIGx3KSB7XG4gICAgICAgIHJldHVybiByYWQgKiAoMjgwLjE2ICsgMzYwLjk4NTYyMzUgKiBkKSAtIGx3O1xuICAgIH1cblxuXG4gICAgLy8gZ2VuZXJhbCBzdW4gY2FsY3VsYXRpb25zXG4gICAgZnVuY3Rpb24gc29sYXJNZWFuQW5vbWFseShkKSB7XG4gICAgICAgIHJldHVybiByYWQgKiAoMzU3LjUyOTEgKyAwLjk4NTYwMDI4ICogZCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZWNsaXB0aWNMb25naXR1ZGUoTSkge1xuXG4gICAgICAgIHZhciBDID0gcmFkICogKDEuOTE0OCAqIHNpbihNKSArIDAuMDIgKiBzaW4oMiAqIE0pICsgMC4wMDAzICogc2luKDMgKiBNKSksIC8vIGVxdWF0aW9uIG9mIGNlbnRlclxuICAgICAgICAgICAgUCA9IHJhZCAqIDEwMi45MzcyOyAvLyBwZXJpaGVsaW9uIG9mIHRoZSBFYXJ0aFxuXG4gICAgICAgIHJldHVybiBNICsgQyArIFAgKyBQSTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBzdW5Db29yZHMoZCkge1xuICAgICAgICB2YXIgTSA9IHNvbGFyTWVhbkFub21hbHkoZCksXG4gICAgICAgICAgICBMID0gZWNsaXB0aWNMb25naXR1ZGUoTSk7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGRlYzogZGVjbGluYXRpb24oTCwgMCksXG4gICAgICAgICAgICByYTogcmlnaHRBc2NlbnNpb24oTCwgMClcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICB2YXIgU3VuQ2FsYyA9IHt9O1xuXG5cbiAgICAvLyBjYWxjdWxhdGVzIHN1biBwb3NpdGlvbiBmb3IgYSBnaXZlbiBkYXRlIGFuZCBsYXRpdHVkZS9sb25naXR1ZGVcbiAgICBTdW5DYWxjLmdldFBvc2l0aW9uID0gZnVuY3Rpb24oZGF0ZSwgbGF0LCBsbmcpIHtcbiAgICAgICAgdmFyIGx3ID0gcmFkICogLWxuZyxcbiAgICAgICAgICAgIHBoaSA9IHJhZCAqIGxhdCxcbiAgICAgICAgICAgIGQgPSB0b0RheXMoZGF0ZSksXG5cbiAgICAgICAgICAgIGMgPSBzdW5Db29yZHMoZCksXG4gICAgICAgICAgICBIID0gc2lkZXJlYWxUaW1lKGQsIGx3KSAtIGMucmE7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGF6aW11dGg6IGF6aW11dGgoSCwgcGhpLCBjLmRlYyksXG4gICAgICAgICAgICBhbHRpdHVkZTogYWx0aXR1ZGUoSCwgcGhpLCBjLmRlYylcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICAvLyBzdW4gdGltZXMgY29uZmlndXJhdGlvbiAoYW5nbGUsIG1vcm5pbmcgbmFtZSwgZXZlbmluZyBuYW1lKVxuICAgIHZhciB0aW1lcyA9IFN1bkNhbGMudGltZXMgPSBbXG4gICAgICAgIFstMC44MzMsICdzdW5yaXNlJywgJ3N1bnNldCddLFxuICAgICAgICBbLTAuMywgJ3N1bnJpc2VFbmQnLCAnc3Vuc2V0U3RhcnQnXSxcbiAgICAgICAgWy02LCAnZGF3bicsICdkdXNrJ10sXG4gICAgICAgIFstMTIsICduYXV0aWNhbERhd24nLCAnbmF1dGljYWxEdXNrJ10sXG4gICAgICAgIFstMTgsICduaWdodEVuZCcsICduaWdodCddLFxuICAgICAgICBbNiwgJ2dvbGRlbkhvdXJFbmQnLCAnZ29sZGVuSG91ciddXG4gICAgXTtcblxuICAgIC8vIGFkZHMgYSBjdXN0b20gdGltZSB0byB0aGUgdGltZXMgY29uZmlnXG4gICAgU3VuQ2FsYy5hZGRUaW1lID0gZnVuY3Rpb24oYW5nbGUsIHJpc2VOYW1lLCBzZXROYW1lKSB7XG4gICAgICAgIHRpbWVzLnB1c2goW2FuZ2xlLCByaXNlTmFtZSwgc2V0TmFtZV0pO1xuICAgIH07XG5cblxuICAgIC8vIGNhbGN1bGF0aW9ucyBmb3Igc3VuIHRpbWVzXG4gICAgdmFyIEowID0gMC4wMDA5O1xuXG4gICAgZnVuY3Rpb24ganVsaWFuQ3ljbGUoZCwgbHcpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoZCAtIEowIC0gbHcgLyAoMiAqIFBJKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYXBwcm94VHJhbnNpdChIdCwgbHcsIG4pIHtcbiAgICAgICAgcmV0dXJuIEowICsgKEh0ICsgbHcpIC8gKDIgKiBQSSkgKyBuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHNvbGFyVHJhbnNpdEooZHMsIE0sIEwpIHtcbiAgICAgICAgcmV0dXJuIEoyMDAwICsgZHMgKyAwLjAwNTMgKiBzaW4oTSkgLSAwLjAwNjkgKiBzaW4oMiAqIEwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGhvdXJBbmdsZShoLCBwaGksIGQpIHtcbiAgICAgICAgcmV0dXJuIGFjb3MoKHNpbihoKSAtIHNpbihwaGkpICogc2luKGQpKSAvIChjb3MocGhpKSAqIGNvcyhkKSkpO1xuICAgIH1cblxuICAgIC8vIHJldHVybnMgc2V0IHRpbWUgZm9yIHRoZSBnaXZlbiBzdW4gYWx0aXR1ZGVcbiAgICBmdW5jdGlvbiBnZXRTZXRKKGgsIGx3LCBwaGksIGRlYywgbiwgTSwgTCkge1xuXG4gICAgICAgIHZhciB3ID0gaG91ckFuZ2xlKGgsIHBoaSwgZGVjKSxcbiAgICAgICAgICAgIGEgPSBhcHByb3hUcmFuc2l0KHcsIGx3LCBuKTtcbiAgICAgICAgcmV0dXJuIHNvbGFyVHJhbnNpdEooYSwgTSwgTCk7XG4gICAgfVxuXG5cbiAgICAvLyBjYWxjdWxhdGVzIHN1biB0aW1lcyBmb3IgYSBnaXZlbiBkYXRlIGFuZCBsYXRpdHVkZS9sb25naXR1ZGVcbiAgICBTdW5DYWxjLmdldFRpbWVzID0gZnVuY3Rpb24oZGF0ZSwgbGF0LCBsbmcpIHtcbiAgICAgICAgdmFyIGx3ID0gcmFkICogLWxuZyxcbiAgICAgICAgICAgIHBoaSA9IHJhZCAqIGxhdCxcblxuICAgICAgICAgICAgZCA9IHRvRGF5cyhkYXRlKSxcbiAgICAgICAgICAgIG4gPSBqdWxpYW5DeWNsZShkLCBsdyksXG4gICAgICAgICAgICBkcyA9IGFwcHJveFRyYW5zaXQoMCwgbHcsIG4pLFxuXG4gICAgICAgICAgICBNID0gc29sYXJNZWFuQW5vbWFseShkcyksXG4gICAgICAgICAgICBMID0gZWNsaXB0aWNMb25naXR1ZGUoTSksXG4gICAgICAgICAgICBkZWMgPSBkZWNsaW5hdGlvbihMLCAwKSxcblxuICAgICAgICAgICAgSm5vb24gPSBzb2xhclRyYW5zaXRKKGRzLCBNLCBMKSxcblxuICAgICAgICAgICAgaSwgbGVuLCB0aW1lLCBKc2V0LCBKcmlzZTtcblxuXG4gICAgICAgIHZhciByZXN1bHQgPSB7XG4gICAgICAgICAgICBzb2xhck5vb246IGZyb21KdWxpYW4oSm5vb24pLFxuICAgICAgICAgICAgbmFkaXI6IGZyb21KdWxpYW4oSm5vb24gLSAwLjUpXG4gICAgICAgIH07XG5cbiAgICAgICAgZm9yIChpID0gMCwgbGVuID0gdGltZXMubGVuZ3RoOyBpIDwgbGVuOyBpICs9IDEpIHtcbiAgICAgICAgICAgIHRpbWUgPSB0aW1lc1tpXTtcblxuICAgICAgICAgICAgSnNldCA9IGdldFNldEoodGltZVswXSAqIHJhZCwgbHcsIHBoaSwgZGVjLCBuLCBNLCBMKTtcbiAgICAgICAgICAgIEpyaXNlID0gSm5vb24gLSAoSnNldCAtIEpub29uKTtcblxuICAgICAgICAgICAgcmVzdWx0W3RpbWVbMV1dID0gZnJvbUp1bGlhbihKcmlzZSk7XG4gICAgICAgICAgICByZXN1bHRbdGltZVsyXV0gPSBmcm9tSnVsaWFuKEpzZXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG5cbiAgICAvLyBtb29uIGNhbGN1bGF0aW9ucywgYmFzZWQgb24gaHR0cDovL2FhLnF1YWUubmwvZW4vcmVrZW4vaGVtZWxwb3NpdGllLmh0bWwgZm9ybXVsYXNcblxuICAgIGZ1bmN0aW9uIG1vb25Db29yZHMoZCkgeyAvLyBnZW9jZW50cmljIGVjbGlwdGljIGNvb3JkaW5hdGVzIG9mIHRoZSBtb29uXG5cbiAgICAgICAgdmFyIEwgPSByYWQgKiAoMjE4LjMxNiArIDEzLjE3NjM5NiAqIGQpLCAvLyBlY2xpcHRpYyBsb25naXR1ZGVcbiAgICAgICAgICAgIE0gPSByYWQgKiAoMTM0Ljk2MyArIDEzLjA2NDk5MyAqIGQpLCAvLyBtZWFuIGFub21hbHlcbiAgICAgICAgICAgIEYgPSByYWQgKiAoOTMuMjcyICsgMTMuMjI5MzUwICogZCksIC8vIG1lYW4gZGlzdGFuY2VcblxuICAgICAgICAgICAgbCA9IEwgKyByYWQgKiA2LjI4OSAqIHNpbihNKSwgLy8gbG9uZ2l0dWRlXG4gICAgICAgICAgICBiID0gcmFkICogNS4xMjggKiBzaW4oRiksIC8vIGxhdGl0dWRlXG4gICAgICAgICAgICBkdCA9IDM4NTAwMSAtIDIwOTA1ICogY29zKE0pOyAvLyBkaXN0YW5jZSB0byB0aGUgbW9vbiBpbiBrbVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICByYTogcmlnaHRBc2NlbnNpb24obCwgYiksXG4gICAgICAgICAgICBkZWM6IGRlY2xpbmF0aW9uKGwsIGIpLFxuICAgICAgICAgICAgZGlzdDogZHRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBTdW5DYWxjLmdldE1vb25Qb3NpdGlvbiA9IGZ1bmN0aW9uKGRhdGUsIGxhdCwgbG5nKSB7XG5cbiAgICAgICAgdmFyIGx3ID0gcmFkICogLWxuZyxcbiAgICAgICAgICAgIHBoaSA9IHJhZCAqIGxhdCxcbiAgICAgICAgICAgIGQgPSB0b0RheXMoZGF0ZSksXG5cbiAgICAgICAgICAgIGMgPSBtb29uQ29vcmRzKGQpLFxuICAgICAgICAgICAgSCA9IHNpZGVyZWFsVGltZShkLCBsdykgLSBjLnJhLFxuICAgICAgICAgICAgaCA9IGFsdGl0dWRlKEgsIHBoaSwgYy5kZWMpO1xuXG4gICAgICAgIC8vIGFsdGl0dWRlIGNvcnJlY3Rpb24gZm9yIHJlZnJhY3Rpb25cbiAgICAgICAgaCA9IGggKyByYWQgKiAwLjAxNyAvIHRhbihoICsgcmFkICogMTAuMjYgLyAoaCArIHJhZCAqIDUuMTApKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgYXppbXV0aDogYXppbXV0aChILCBwaGksIGMuZGVjKSxcbiAgICAgICAgICAgIGFsdGl0dWRlOiBoLFxuICAgICAgICAgICAgZGlzdGFuY2U6IGMuZGlzdFxuICAgICAgICB9O1xuICAgIH07XG5cblxuICAgIC8vIGNhbGN1bGF0aW9ucyBmb3IgaWxsdW1pbmF0aW9uIHBhcmFtZXRlcnMgb2YgdGhlIG1vb24sXG4gICAgLy8gYmFzZWQgb24gaHR0cDovL2lkbGFzdHJvLmdzZmMubmFzYS5nb3YvZnRwL3Byby9hc3Ryby9tcGhhc2UucHJvIGZvcm11bGFzIGFuZFxuICAgIC8vIENoYXB0ZXIgNDggb2YgXCJBc3Ryb25vbWljYWwgQWxnb3JpdGhtc1wiIDJuZCBlZGl0aW9uIGJ5IEplYW4gTWVldXMgKFdpbGxtYW5uLUJlbGwsIFJpY2htb25kKSAxOTk4LlxuXG4gICAgU3VuQ2FsYy5nZXRNb29uSWxsdW1pbmF0aW9uID0gZnVuY3Rpb24oZGF0ZSkge1xuXG4gICAgICAgIHZhciBkID0gdG9EYXlzKGRhdGUpLFxuICAgICAgICAgICAgcyA9IHN1bkNvb3JkcyhkKSxcbiAgICAgICAgICAgIG0gPSBtb29uQ29vcmRzKGQpLFxuXG4gICAgICAgICAgICBzZGlzdCA9IDE0OTU5ODAwMCwgLy8gZGlzdGFuY2UgZnJvbSBFYXJ0aCB0byBTdW4gaW4ga21cblxuICAgICAgICAgICAgcGhpID0gYWNvcyhzaW4ocy5kZWMpICogc2luKG0uZGVjKSArIGNvcyhzLmRlYykgKiBjb3MobS5kZWMpICogY29zKHMucmEgLSBtLnJhKSksXG4gICAgICAgICAgICBpbmMgPSBhdGFuKHNkaXN0ICogc2luKHBoaSksIG0uZGlzdCAtIHNkaXN0ICogY29zKHBoaSkpLFxuICAgICAgICAgICAgYW5nbGUgPSBhdGFuKGNvcyhzLmRlYykgKiBzaW4ocy5yYSAtIG0ucmEpLCBzaW4ocy5kZWMpICogY29zKG0uZGVjKSAtXG4gICAgICAgICAgICAgICAgY29zKHMuZGVjKSAqIHNpbihtLmRlYykgKiBjb3Mocy5yYSAtIG0ucmEpKTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZnJhY3Rpb246ICgxICsgY29zKGluYykpIC8gMixcbiAgICAgICAgICAgIHBoYXNlOiAwLjUgKyAwLjUgKiBpbmMgKiAoYW5nbGUgPCAwID8gLTEgOiAxKSAvIE1hdGguUEksXG4gICAgICAgICAgICBhbmdsZTogYW5nbGVcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICBmdW5jdGlvbiBob3Vyc0xhdGVyKGRhdGUsIGgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUudmFsdWVPZigpICsgaCAqIGRheU1zIC8gMjQpO1xuICAgIH1cblxuICAgIC8vIGNhbGN1bGF0aW9ucyBmb3IgbW9vbiByaXNlL3NldCB0aW1lcyBhcmUgYmFzZWQgb24gaHR0cDovL3d3dy5zdGFyZ2F6aW5nLm5ldC9rZXBsZXIvbW9vbnJpc2UuaHRtbCBhcnRpY2xlXG4gICAgU3VuQ2FsYy5nZXRNb29uVGltZXMgPSBmdW5jdGlvbihkYXRlLCBsYXQsIGxuZywgaW5VVEMpIHtcbiAgICAgICAgdmFyIHQgPSBuZXcgRGF0ZShkYXRlKTtcbiAgICAgICAgaWYgKGluVVRDKSB0LnNldFVUQ0hvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgICBlbHNlIHQuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgICAgdmFyIGhjID0gMC4xMzMgKiByYWQsXG4gICAgICAgICAgICBoMCA9IFN1bkNhbGMuZ2V0TW9vblBvc2l0aW9uKHQsIGxhdCwgbG5nKS5hbHRpdHVkZSAtIGhjLFxuICAgICAgICAgICAgaDEsIGgyLCByaXNlLCBzZXQsIGEsIGIsIHhlLCB5ZSwgZCwgcm9vdHMsIHgxLCB4MiwgZHg7XG5cbiAgICAgICAgLy8gZ28gaW4gMi1ob3VyIGNodW5rcywgZWFjaCB0aW1lIHNlZWluZyBpZiBhIDMtcG9pbnQgcXVhZHJhdGljIGN1cnZlIGNyb3NzZXMgemVybyAod2hpY2ggbWVhbnMgcmlzZSBvciBzZXQpXG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDw9IDI0OyBpICs9IDIpIHtcbiAgICAgICAgICAgIGgxID0gU3VuQ2FsYy5nZXRNb29uUG9zaXRpb24oaG91cnNMYXRlcih0LCBpKSwgbGF0LCBsbmcpLmFsdGl0dWRlIC0gaGM7XG4gICAgICAgICAgICBoMiA9IFN1bkNhbGMuZ2V0TW9vblBvc2l0aW9uKGhvdXJzTGF0ZXIodCwgaSArIDEpLCBsYXQsIGxuZykuYWx0aXR1ZGUgLSBoYztcblxuICAgICAgICAgICAgYSA9IChoMCArIGgyKSAvIDIgLSBoMTtcbiAgICAgICAgICAgIGIgPSAoaDIgLSBoMCkgLyAyO1xuICAgICAgICAgICAgeGUgPSAtYiAvICgyICogYSk7XG4gICAgICAgICAgICB5ZSA9IChhICogeGUgKyBiKSAqIHhlICsgaDE7XG4gICAgICAgICAgICBkID0gYiAqIGIgLSA0ICogYSAqIGgxO1xuICAgICAgICAgICAgcm9vdHMgPSAwO1xuXG4gICAgICAgICAgICBpZiAoZCA+PSAwKSB7XG4gICAgICAgICAgICAgICAgZHggPSBNYXRoLnNxcnQoZCkgLyAoTWF0aC5hYnMoYSkgKiAyKTtcbiAgICAgICAgICAgICAgICB4MSA9IHhlIC0gZHg7XG4gICAgICAgICAgICAgICAgeDIgPSB4ZSArIGR4O1xuICAgICAgICAgICAgICAgIGlmIChNYXRoLmFicyh4MSkgPD0gMSkgcm9vdHMrKztcbiAgICAgICAgICAgICAgICBpZiAoTWF0aC5hYnMoeDIpIDw9IDEpIHJvb3RzKys7XG4gICAgICAgICAgICAgICAgaWYgKHgxIDwgLTEpIHgxID0geDI7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChyb290cyA9PT0gMSkge1xuICAgICAgICAgICAgICAgIGlmIChoMCA8IDApIHJpc2UgPSBpICsgeDE7XG4gICAgICAgICAgICAgICAgZWxzZSBzZXQgPSBpICsgeDE7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAocm9vdHMgPT09IDIpIHtcbiAgICAgICAgICAgICAgICByaXNlID0gaSArICh5ZSA8IDAgPyB4MiA6IHgxKTtcbiAgICAgICAgICAgICAgICBzZXQgPSBpICsgKHllIDwgMCA/IHgxIDogeDIpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAocmlzZSAmJiBzZXQpIGJyZWFrO1xuXG4gICAgICAgICAgICBoMCA9IGgyO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gICAgICAgIGlmIChyaXNlKSByZXN1bHQucmlzZSA9IGhvdXJzTGF0ZXIodCwgcmlzZSk7XG4gICAgICAgIGlmIChzZXQpIHJlc3VsdC5zZXQgPSBob3Vyc0xhdGVyKHQsIHNldCk7XG5cbiAgICAgICAgaWYgKCFyaXNlICYmICFzZXQpIHJlc3VsdFt5ZSA+IDAgPyAnYWx3YXlzVXAnIDogJ2Fsd2F5c0Rvd24nXSA9IHRydWU7XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG5cbiAgICAvLyBleHBvcnQgYXMgQU1EIG1vZHVsZSAvIE5vZGUgbW9kdWxlIC8gYnJvd3NlciB2YXJpYWJsZVxuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIGRlZmluZShTdW5DYWxjKTtcbiAgICBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJykgbW9kdWxlLmV4cG9ydHMgPSBTdW5DYWxjO1xuICAgIGVsc2Ugd2luZG93LlN1bkNhbGMgPSBTdW5DYWxjO1xuXG59KCkpOyJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
