function getWeather(){var t="http://api.wunderground.com/api/c67e9d8da41867a4/geolookup/conditions/q/Canada/Toronto.json";$.ajax({url:t,dataType:"jsonp",success:function(t){t.location.city,t.current_observation.temp_c}})}function updateBackground(t,n){$.getJSON("http://ip-api.com/json/?callback=?",function(e){latitude=e.lat,longitude=e.lon;var i=SunCalc2.getDayInfo(n,latitude,longitude,!0),a=i.morningTwilight,s=i.nightTwilight,r=epochTime(a.astronomical.start.getTime()),o=(a.civil.end.getHours(),epochTime(i.transit.getTime())),u=(i.sunrise.start.getTime(),i.sunrise.end.getTime(),s.astronomical.start.getTime()),g=epochTime(i.sunset.end.getTime()),c=epochTime(i.dusk.getTime()),d=epochTime(s.astronomical.end.getTime());d+=14636,log("Midnight "+d),t===!0&&(log("times dusk "+epochTime(i.dusk.getTime())),log("times sunset start "+epochTime(i.sunset.start.getTime())),log("times sunset end "+epochTime(i.sunset.end.getTime())),log("times sunrise start "+epochTime(i.sunrise.start.getTime())),log("times sunrise end "+epochTime(i.sunrise.end.getTime())),log("times dawn "+epochTime(i.dawn.getTime())),log("times noon "+epochTime(i.transit.getTime())),log("night start "+epochTime(u)),log("morning start "+epochTime(a.astronomical.start.getTime())),log("morning end "+epochTime(a.civil.end.getTime())));var m=["74Wingold-Day-Building.png","74Wingold-Day-Road.png","74Wingold-Day-PlantsRocks.png"],l=["74Wingold-Night-Building.png","74Wingold-Night-Road.png","74Wingold-Night-PlantsRocks.png"],h=$("body"),p=$("#showStars"),f=($("#bgImg"),$("#cloudDiv")),M=$("#building"),T=$("#road"),v=$("#plantsrocks"),b=epochTime(n.getTime());log("current time in epoch: "+b);var I=b;o>I&&g>=I&&(M.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[0]})),T.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[1]})),v.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[2]}))),I>=o&&g>I&&(M.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[0]})),T.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[1]})),v.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[2]}))),I>=g&&c>I&&(M.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[0]})),T.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[1]})),v.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+m[2]}))),I>=d&&r>I&&(M.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+l[0]})),T.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+l[1]})),v.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+l[2]}))),I>=c&&d>=I&&(M.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+l[0]})),T.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+l[1]})),v.prepend($("<img>",{id:"bgImg",src:"./assets/img/"+l[2]}))),I>=d&&r>I&&(h.toggleClass("dawn"),p.addClass("stars"),f.toggleClass("clouds-night")),I>=r&&o>I&&(h.toggleClass("sunrise"),f.addClass("clouds-day")),I>=o&&g>I&&(h.toggleClass("day "),f.addClass("clouds-day")),I>=g&&c>I&&(h.toggleClass("sunset"),f.addClass("clouds-day")),I>=c&&d>=I&&(h.toggleClass("night"),p.addClass("stars"),f.addClass("clouds-night"),f.removeClass("clouds-day"))})}function log(t){}function epochTime(t){return Math.floor(t/1e3)}function displayMoonPhase(t){var n=SunCalc.getMoonIllumination(t),e=n.phase,i=findMoonPhase(e);$(".moonPhase").append(i)}function findMoonPhase(t){var n="";return 0===t?n="New Moon":t>0&&.25>t?n="Waxing Crescent":.25==t?n="First Quarter":t>.25&&.5>t?n="Waxing Gibbous":.5==t?n="Full Moon":t>.5&&.75>t?n="Last Quarter":t>=.75&&1>=t&&(n="Waning Crescent"),n}function formatTime(t,n){if(isNaN(t))return"&nbsp;&nbsp;n/a&nbsp;&nbsp;";var e,i=t.getHours(),a=t.getMinutes();return n?(e=12>i?"am":"pm",0===i&&(i=12),i>12&&(i-=12)):i=10>i?"0"+i:""+i,a=10>a?"0"+a:""+a,i+":"+a+(n?" "+e:"")}$(document).ready(function(){var t=!0,n=new Date;setInterval(updateBackground(t,n),100),getWeather()}),SunCalc2=function(){function t(t){return t.valueOf()/R-.5+M}function n(t){return new Date((t+.5-M)*R)}function e(t,n){return Math.round(t-T-$-n/(2*Math.PI))}function i(t,n,e){return T+$+(t+n)/(2*Math.PI)+e}function a(t){return b+I*(t-T)}function s(t){return y*Math.sin(t)+P*Math.sin(2*t)+D*Math.sin(3*t)}function r(t,n){return t+k+n+Math.PI}function o(t,n,e){return t+w*Math.sin(n)+C*Math.sin(2*e)}function u(t){return Math.asin(Math.sin(t)*Math.sin(W))}function g(t){return Math.atan2(Math.sin(t)*Math.cos(W),Math.cos(t))}function c(t,n){return N+S*(t-T)-n}function d(t,n,e,i){var a=t-n;return Math.atan2(Math.sin(a),Math.cos(a)*Math.sin(e)-Math.tan(i)*Math.cos(e))}function m(t,n,e,i){var a=t-n;return Math.asin(Math.sin(e)*Math.sin(i)+Math.cos(e)*Math.cos(i)*Math.cos(a))}function l(t,n,e){return Math.acos((Math.sin(t)-Math.sin(n)*Math.sin(e))/(Math.cos(n)*Math.cos(e)))}function h(t,n,e,a,s){return o(i(t,a,s),n,e)}function p(t,n){return t-(n-t)}function f(t,n,e){var i=a(t),o=s(i),l=r(i,o),h=u(l),p=g(l),f=c(t,n);return{azimuth:d(f,p,e,h),altitude:m(f,p,e,h)}}var M=2440588,T=2451545,v=Math.PI/180,b=357.5291*v,I=.98560028*v,$=9e-4,w=.0053,C=-.0069,y=1.9148*v,P=.02*v,D=3e-4*v,k=102.9372*v,W=23.45*v,N=280.16*v,S=360.9856235*v,H=-.83*v,j=.53*v,x=-6*v,B=-12*v,O=-18*v,R=864e5;return{getDayInfo:function(g,c,d,m){var f=-d*v,M=c*v,T=t(g),b=e(T,f),I=i(0,f,b),$=a(I),w=s($),C=r($,w),y=u(C),P=o(I,$,C),D=l(H,M,y),k=l(H+j,M,y),W=h(D,$,C,f,b),N=h(k,$,C,f,b),S=p(P,W),R=p(P,N),z=l(x,M,y),E=h(z,$,C,f,b),q=p(P,E),F={dawn:n(q),sunrise:{start:n(S),end:n(R)},transit:n(P),sunset:{start:n(N),end:n(W)},dusk:n(E)};if(m){var Q=l(B,M,y),U=l(O,M,y),_=h(Q,$,C,f,b),G=h(U,$,C,f,b),J=p(P,_),L=p(P,G);F.morningTwilight={astronomical:{start:n(L),end:n(J)},nautical:{start:n(J),end:n(q)},civil:{start:n(q),end:n(S)}},F.nightTwilight={civil:{start:n(W),end:n(E)},nautical:{start:n(E),end:n(_)},astronomical:{start:n(_),end:n(G)}}}return F},getSunPosition:function(n,e,i){return f(t(n),-i*v,e*v)}}}(),function(){"use strict";function t(t){return t.valueOf()/P-.5+D}function n(t){return new Date((t+.5-D)*P)}function e(n){return t(n)-k}function i(t,n){return w(v(t)*b(W)-I(n)*v(W),b(t))}function a(t,n){return $(v(n)*b(W)+b(n)*v(W)*v(t))}function s(t,n,e){return w(v(t),b(t)*v(n)-I(e)*b(n))}function r(t,n,e){return $(v(n)*v(e)+b(n)*b(e)*b(t))}function o(t,n){return y*(280.16+360.9856235*t)-n}function u(t){return y*(357.5291+.98560028*t)}function g(t){var n=y*(1.9148*v(t)+.02*v(2*t)+3e-4*v(3*t)),e=102.9372*y;return t+n+e+T}function c(t){var n=u(t),e=g(n);return{dec:a(e,0),ra:i(e,0)}}function d(t,n){return Math.round(t-H-n/(2*T))}function m(t,n,e){return H+(t+n)/(2*T)+e}function l(t,n,e){return k+t+.0053*v(n)-.0069*v(2*e)}function h(t,n,e){return C((v(t)-v(n)*v(e))/(b(n)*b(e)))}function p(t,n,e,i,a,s,r){var o=h(t,e,i),u=m(o,n,a);return l(u,s,r)}function f(t){var n=y*(218.316+13.176396*t),e=y*(134.963+13.064993*t),s=y*(93.272+13.22935*t),r=n+6.289*y*v(e),o=5.128*y*v(s),u=385001-20905*b(e);return{ra:i(r,o),dec:a(r,o),dist:u}}function M(t,n){return new Date(t.valueOf()+n*P/24)}var T=Math.PI,v=Math.sin,b=Math.cos,I=Math.tan,$=Math.asin,w=Math.atan2,C=Math.acos,y=T/180,P=864e5,D=2440588,k=2451545,W=23.4397*y,N={};N.getPosition=function(t,n,i){var a=y*-i,u=y*n,g=e(t),d=c(g),m=o(g,a)-d.ra;return{azimuth:s(m,u,d.dec),altitude:r(m,u,d.dec)}};var S=N.times=[[-.833,"sunrise","sunset"],[-.3,"sunriseEnd","sunsetStart"],[-6,"dawn","dusk"],[-12,"nauticalDawn","nauticalDusk"],[-18,"nightEnd","night"],[6,"goldenHourEnd","goldenHour"]];N.addTime=function(t,n,e){S.push([t,n,e])};var H=9e-4;N.getTimes=function(t,i,s){var r,o,c,h,f,M=y*-s,T=y*i,v=e(t),b=d(v,M),I=m(0,M,b),$=u(I),w=g($),C=a(w,0),P=l(I,$,w),D={solarNoon:n(P),nadir:n(P-.5)};for(r=0,o=S.length;o>r;r+=1)c=S[r],h=p(c[0]*y,M,T,C,b,$,w),f=P-(h-P),D[c[1]]=n(f),D[c[2]]=n(h);return D},N.getMoonPosition=function(t,n,i){var a=y*-i,u=y*n,g=e(t),c=f(g),d=o(g,a)-c.ra,m=r(d,u,c.dec);return m+=.017*y/I(m+10.26*y/(m+5.1*y)),{azimuth:s(d,u,c.dec),altitude:m,distance:c.dist}},N.getMoonIllumination=function(t){var n=e(t),i=c(n),a=f(n),s=149598e3,r=C(v(i.dec)*v(a.dec)+b(i.dec)*b(a.dec)*b(i.ra-a.ra)),o=w(s*v(r),a.dist-s*b(r)),u=w(b(i.dec)*v(i.ra-a.ra),v(i.dec)*b(a.dec)-b(i.dec)*v(a.dec)*b(i.ra-a.ra));return{fraction:(1+b(o))/2,phase:.5+.5*o*(0>u?-1:1)/Math.PI,angle:u}},N.getMoonTimes=function(t,n,e,i){var a=new Date(t);i?a.setUTCHours(0,0,0,0):a.setHours(0,0,0,0);for(var s,r,o,u,g,c,d,m,l,h,p,f,T,v=.133*y,b=N.getMoonPosition(a,n,e).altitude-v,I=1;24>=I&&(s=N.getMoonPosition(M(a,I),n,e).altitude-v,r=N.getMoonPosition(M(a,I+1),n,e).altitude-v,g=(b+r)/2-s,c=(r-b)/2,d=-c/(2*g),m=(g*d+c)*d+s,l=c*c-4*g*s,h=0,l>=0&&(T=Math.sqrt(l)/(2*Math.abs(g)),p=d-T,f=d+T,Math.abs(p)<=1&&h++,Math.abs(f)<=1&&h++,-1>p&&(p=f)),1===h?0>b?o=I+p:u=I+p:2===h&&(o=I+(0>m?f:p),u=I+(0>m?p:f)),!o||!u);I+=2)b=r;var $={};return o&&($.rise=M(a,o)),u&&($.set=M(a,u)),o||u||($[m>0?"alwaysUp":"alwaysDown"]=!0),$},"function"==typeof define&&define.amd?define(N):"undefined"!=typeof module?module.exports=N:window.SunCalc=N}();